{"ast":null,"code":"var _jsxFileName = \"/Users/runnanguo/Downloads/unichat-course-master/src/contexts/AuthContext.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\nconst AuthContext = React.createContext();\nexport const useAuth = () => useContext(AuthContext);\nexport const AuthProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const history = useHistory();\n  useEffect(() => {\n    auth.onAuthStateChanged(user => {\n      setUser(user);\n      setLoading(false);\n      if (user) history.push('/chats');\n    });\n  }, [user, history]);\n  const value = {\n    user\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, !loading && children);\n};","map":{"version":3,"names":["React","useContext","useEffect","useState","useHistory","auth","AuthContext","createContext","useAuth","AuthProvider","_ref","children","loading","setLoading","user","setUser","history","onAuthStateChanged","push","value","createElement","Provider","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/runnanguo/Downloads/unichat-course-master/src/contexts/AuthContext.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\n\n\nconst AuthContext  = React.createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({children}) => {\n    const [loading, setLoading] = useState(true)\n    const [user, setUser] = useState(null)\n    const history = useHistory()\n\n    useEffect(() => {\n        auth.onAuthStateChanged((user)=>{\n            setUser(user);\n            setLoading(false);\n\n            \n            if(user) history.push('/chats')\n        })\n    }, [user, history]);\n\n    const value = { user };\n\n    return (\n        <AuthContext.Provider value={value}>\n\n            {!loading && children}\n\n        </AuthContext.Provider>\n    )\n}"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,IAAI,QAAQ,aAAa;AAGlC,MAAMC,WAAW,GAAIN,KAAK,CAACO,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAMP,UAAU,CAACK,WAAW,CAAC;AAEpD,OAAO,MAAMG,YAAY,GAAGC,IAAA,IAAgB;EAAA,IAAf;IAACC;EAAQ,CAAC,GAAAD,IAAA;EACnC,MAAM,CAACE,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAMa,OAAO,GAAGZ,UAAU,CAAC,CAAC;EAE5BF,SAAS,CAAC,MAAM;IACZG,IAAI,CAACY,kBAAkB,CAAEH,IAAI,IAAG;MAC5BC,OAAO,CAACD,IAAI,CAAC;MACbD,UAAU,CAAC,KAAK,CAAC;MAGjB,IAAGC,IAAI,EAAEE,OAAO,CAACE,IAAI,CAAC,QAAQ,CAAC;IACnC,CAAC,CAAC;EACN,CAAC,EAAE,CAACJ,IAAI,EAAEE,OAAO,CAAC,CAAC;EAEnB,MAAMG,KAAK,GAAG;IAAEL;EAAK,CAAC;EAEtB,oBACId,KAAA,CAAAoB,aAAA,CAACd,WAAW,CAACe,QAAQ;IAACF,KAAK,EAAEA,KAAM;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE9B,CAACf,OAAO,IAAID,QAEK,CAAC;AAE/B,CAAC"},"metadata":{},"sourceType":"module"}